<!DOCTYPE HTML>
<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><TITLE> HELP </TITLE>
<LINK REL="stylesheet" HREF="edes.php?R:$h/i/help2.css" TYPE="text/css">
</HEAD>
<BODY style='margin:0px' scroll=no oncontextmenu='return false;' onhelp='return false'><!-- [HelpIni] --><table id="Esquema" width="100%" cellspacing="1" cellpadding="2">
<tbody>
<tr style="position: relative;">
<td id="Etiqueta">Varios</td>
</tr>
<tr>
<td id="Descripcion"><strong><u>LOGIN<br /></u></strong>Para entrar en la aplicaci?n como desarrollador se entra por el login pues tienes que estar activo como usuario de la aplicación y como desarrollador, para este ?ltimo caso despu?s de meter el password de usuario introduciremos con la tecla "shift" (alzar may?sculas) el s?mbolo "&" y la clave de desarrollo, teniendo en cuenta que el nombre del usuario de la aplicaci?n tienen que coincidir con el nombre del desarrollador.<br />Las caracter?sticas del input "login" se define en la hoja de estilo "login.css" en la regla "#LOGITUD" definiendo la longitud máxima y m?nima y los tipos de caracteres que se meten en el login, pudiendo definir como login el "DNI" el "email" o cualquier otra cosa.<br />Para facilitar la entrada en la aplicaci?n se pueden pasar como par?metro de la URL el login y los dos password separados por el s?mbolo "&" teniendo en cuenta que el password de la aplicaci?n siempre va en may?sculas y la de desarrollo en min?sculas pudiendo entrar sin par?metros con uno, dos o los tres, si se mete mas de uno el login no se parar? para pedir datos entrando directamente.<br />En la opci?n "Modificar clave" del usuario est? el campo "Caracter desencadenante" si definimos alg?n caracter se podr? meter la clave de 3 formas:<br />1.- La clave tal cual.<br />2.- Cuanquier combinaci?n de caracteres menos el "Caracter desencadenante", mas el caracter desencadenante mas la clave.<br />3.- Igual que el punto 2 mas otra vez el "Caracter desencadenante" mas cualquier combinación de caracteres incluso el caracter desencadenante.<br />Si no has entrado como desarrollador y quieres activarlo pon el foco en el top y pulsa "&#developer;", si heres desarrollador te pedirá la clave de confirmación.<br /><strong><u><br />COMENTARIOS</u></strong><br />- Para anular una línea o ponerla como comentario se usará el "." como primer carácter (si la linea acaba en "{" se entendería que se está definiendo una clase de una hoja de estilo), en la etiqueta "[CSSAdd]" es en la única etiqueta donde el punto como primer caracter no es un comentario, las dos barras '//' y lo encerrado entre "/*" y "*/".<br /><br /><strong><u>LOS PARÁMETROS</u></strong><br />- En algunas etiquetas la barra vertical "|" se usa como delimitador de parámetros, si hace falta que la barra no sea un delimitador se puede anteponer la barra invertida "\".<br /><br /><span style="text-decoration: underline;"><strong>PARTIR LAS LINEAS</strong></span><br />En el punto que se quiera se puede partir las lineas en cualquier número de partes poniendo el caracter "_" al final de la linea, está podría llevar mas a la derecha un comentario del tipo "// ..." que no se tendrá en cuenta.<br />El último caracter de la definición de una etiqueta no puede ser "|" pues cuando es un delimitador de parámetro y es el último caracter indica que la definición continua en la siguiente linea.<br /><br /><strong><u>EL PARAMETRO MODO</u></strong><br />Todas las etiquetas que contienen el parámetro Modo se puede bien especificar un solo modo, bien varios modos separados por comas o bien <br />indicar todos los modos con un asterisco "*". <br /><strong><u><br />ENTRAR Y SALIR DE LOS LENGUAJES</u></strong><br />En todas las etiquetas de multilínea se puede salir del lenguaje actual y entrar en otro dejando siempre al final el lenguaje de la etiqueta en la que se esta, se decir: Si estamos en PHP podremos salir tanto a Javascript como a HTML, estando en Javascript podremos salir a HTML y viceversa.<br /><br /><strong><u>ESTANDO EN JAVASCRIPT Y HTML</u></strong><br />Se puede incrustar PHP ya sean sentencias o llamadas a funciones con la sinsaxis "< ?" o "< ?=" y terminado en "? >" y también incrustar varibles mediante "{$...}", ejemplos:<br /><span style="font-family: Courier;">alert((<!--?=3*2?-->+3)+' de <!--?=$Nombre.'XXX'?-->');<br />alert('Mi nombre es {$nombre}');<br /></span>También se podrá poner la directiva "#include()"<br /><br /><strong><u>RELACION ENTRE VENTANAS<br /></u></strong>Cuando se abren ventanas mediante el motor o se utiliza la función eCallSrv() la ventana que se abre se relaciona con su padre mediante la variable "_WOPENER" y si la página no es del motor con "window.frameElement.WOPENER". También están las funciones "ePPF()" y "ePGF()".<br /><br /><strong><u>NOTACION UTILIZADA<br /></u></strong>Los dos puntos ":" indican que los parámetros especificados son excluyentes, es decir, s?lo se podr? utilizar uno de ellos. Por ejemplo, en la siguiente etiqueta como primer par?metro s?lo se podr? utilizar una "C" o una "E".<br /><br /><span style="font-family: Courier;">[Width] C:E | NomCampo | AnchoEnPixels</span><br /><br />Los parámetros que siguen a la etiqueta encerrados entre corchetes "<span style="font-family: Courier;">[]</span>" indican que son opcionales.<br /><br /><strong><u>CARACTERES DEL SISTEMA</u></strong><br />- Cualquier carácter que se quiera poner que forme parte de la sintaxis de la etiqueta se sustituirá po el código extendido "ISO-8859-1", por ejemplo en la etiqueta [Field] en los campos si el formulario tiene mas de una columna se pone primero el número de columna, si este número es parte de la etiqueta el número se pondrá como caracter extendido.<br />Fields]<br />     2 Nombre | nombre | N | T | 30 | | M | | |<br />pondras:<br />    & #50; Nombre | nombre | N | T | 30 | | M | | |<br /><br /><strong><u>A TENER EN CUENTA<br /></u></strong>eDes no chequea la sintaxis de las etiquetas ni funciones teniendo que solventar esta deficiencia en tiempo de desarrollo, pero sí se detectan errores de sintaxis en las etiquetas que contienen php.<br /><br />Se recomienda el uso de las comillas dobles como delimitador del valor de las variables y utilizar la función "qCuote()" si se vá a asignar variables alfanuméricas.<br /><u><strong><br />Trayectoria de los ficheros<br /></strong></u>Cuando se necesita la trayectoria de un fichero se utiliza la funci?n "eScript()" ya que eDes maneja tres ubicaciones por defecto a saber:<br />- Si el fichero empieza por "//" ser? un subdirectorio paralelo al de la aplicaci?n pero terminado en ".file".<br />- Si el fichero empieza por "/" se asumir? desde la ra?z de la aplicaci?n.<br />- Si el fichero empieza por "=" será un directorio paralelo a la aplicación.<br />- Si el fichero empieza por "$" estará dentro del directorio del motor.<br />- Si empieza por cualquier otro car?cter se asumir? que est? dentro del directorio "d" de datos.<br /><br /><strong><u>La distribución de los fuentes</u></strong><br />hay dos partes muy diferenciadas el directorio de la aplicaci?n y el directorio de la aplicaci?n.file que se usa para de forma masiva meter ficheros y separarlos de la aplicaci?n.<br />El directorio de la aplicaci?n donde tenemos los siguientes subdirectorios:<br />- "<strong>http</strong>": Aqu? se ponen todos los ficheros p?blicos que no tienen ninguna trascendencia como son los iconos, im?genes y hojas de estilo.<br />- "<strong>d</strong>": Es el directorio principal de los script, pudiendo contener mas subdirectorios para agrupar los script.<br />- "_<strong>datos</strong>": Datos de configuraci?n<br />- "_<strong>tmp</strong>": A partir de este subdirectorio se generar los ficheros temporales de la aplicaci?n.<br />- "<strong>_d_</strong>": Directorio de datos de los desarrolladores.<br /><br /><strong><u>Otros</u></strong>:<br />- Hay que procurar no cambiar de directorio cuando se est? en PHP ya que las ventanas se pueden llamar desde varios contextos.<br />- Hay que procurar que eDes genere el m?ximo posible de c?digo ya que el nivel de prestaciones es homog?neo, c?digo chequeado y se tarda menos.<br />- En el grupo de fichas no puede haber nombres de campos iguales en distinta tabla a excepci?n del campo de relaci?n.<br /><br /><strong><u>Construcción al vuelo</u></strong>:<br />EDES genera las p?ginas al vuelo, esta se construye de forma secuencial,...<br /><br /><strong><u>Include:<br /></u></strong>Directiva del motor para incluir en cualquier l?nea c?digo eDes y con cualquier nivel de anidamiento. La sintaxis es la "directiva", entre parentesis el "modo" y despu?s el "script" a incluir ej:<span style="font-family: Courier;"> #include( Mode ) NomScript [ | FileOpcional=false ]<br /></span>Del fichero incluir? hasta la etiqueta [Note] o hasta el final del fichero.<br />"NomScript" puede tener variables del tipo "{$...}".<br /><br /><strong><u>Tipo de dato fecha:<br /></u></strong>Actualmente solo se utiliza el formato de fecha "DD-MM-AAAA".<br /><strong><u><br />CODIGO CONDICIONAL<br /></u></strong>Hay varias formas de condicionar la generaci?n de campos dentro de la etiqueta [Fields]<br /><br />1. Utilizando las interrogaciones ?? , metiendo la condici?n dentro de ellas y colocando todo esto delante de un campo, por ejemplo:  <br /> <br /><span style="font-family: Courier New;">? $GLOBALS['_variable_de_sesion_']=='...' ? | cd_gs_node | + | T | 8|250,27| Q* |_Node||   <br /></span> <br />2. Utilizando la etiqueta [cc] para crear una condici?n (create condition), por ejemplo:  <br /><br />Las variables de sesion, get y post son visibles<br /><span style="font-family: Courier New;">[cc] #q | $_variable_=='...'<br />El resto de variables se accederá con $GLOBALS[]<br />[cc] #q | $GLOBALS['_variable_']=='...'</span><span style="font-family: Courier New;"><br /><br />Condici?n de una linea: <br />[Fields] <br />     ¿ #q ?     | cd_gs_node | + | T | 8 | 250,27 | Q* | _Node | |      </span><span style="font-family: Courier New;">// Usas la condici?n<br /></span><span style="font-family: Courier New;">     ¿ #q, #r ? | cd_gs_user | + | T | 8 | 250,27 | Q* | _Node | |      </span><span style="font-family: Courier New;">// Usas la condici?n<br /></span> <br />Condici?n de un grupo de lineas: <br /><span style="font-family: Courier New;">[Fields]<br />#q ¿<br />            | cd_gs_node  | + | T | 8|250,27| Q* |_Node||<br />   Distrito | cd_distrito | 0 | Ss| 8|150   | A  |     ||<br />   Barrio   | cd_barrio   | 0 | Ss| 8|175   | A  |     ||<br />?¿<br />   Distrito | cd_distrito | 0 | Ss| 8|150   | A  |     ||<br />   Barrio   | cd_barrio   | 0 | Ss| 8|175   | A  |     ||<br />?  <br /></span>  <br />En esta ?ltima forma se generar?n los campos del primer bloque de interrogaciones si el valor de la variable #q es 1 (true), de lo contrario, se generar?n los campos que est?n dentro del segundo bloque de interrogaciones.  <br /> <br />3. De la forma: #(para_los_modos_xxx) generar_el_siguiente_campo , esta forma de condicionar la generaci?n de campos se gener? puesto que normalmente se condiciona la generaci?n de campos en funci?n de determinados modos (como en el ejemplo anterior de la etiqueta [cc]). Tambi?n hay tres valores especiales que s?n "P" o "PDF" cuando pasa el listado a PDF, "X" o "XLS" cuando pasa el listado a Excel "#(P,X)" y "H" o "HTM" cuando la salida es "HTML", esto nos permite tener distinto tipo de listado seg?n su salida.<br />Ejemplos:  <br /> <br /><span style="font-family: Courier New;">[Fields]  <br /> #( a,bR,cR,mR ) | cd_gs_node | + | T | 8 | 250,27 | Q* |_Node||<br /></span> <br /> Este ejemplo realizar?a la misma funci?n que el primer ejemplo de la etiqueta [cc].  <br />  <br /><span style="font-family: Courier New;">[Fields] <br />#( a,bR,cR,mR ) ¿<br />            | cd_gs_node  | + | T  | 8 | 250,27| Q* |_Node||  <br />   Distrito | cd_distrito | 0 | Ss | 8 | 150   | A  |     ||  <br />   Barrio   | cd_barrio   | 0 | Ss | 8 | 175   | A  |     ||  <br /> ?¿<br />   Distrito | cd_distrito | 0 | Ss | 8 | 150   | A  |     ||  <br />   Barrio   | cd_barrio   | 0 | Ss | 8 | 175   | A  |     ||  <br /> ?  <br /></span>  <br /> Este ejemplo realizar?a la misma funci?n que el segundo ejemplo de la etiqueta [cc].  <br />  <br /><span style="font-family: Courier New;">#( a,bR,cR,mR ) ¿<br />            | cd_gs_node  | + | T  | 8 | 250,27| Q* |_Node||  <br />   Distrito | cd_distrito | 0 | Ss | 8 | 150   | A  |     ||  <br />   Barrio   | cd_barrio   | 0 | Ss | 8 | 175   | A  |     ||  <br />?  <br /></span>   <br />Resumen de los posibles formatos:<br /><span style="font-family: Courier New;">1. #(Modo,Modo,,,) definición de campo<br /><br />2. #(Modo,Modo,,,) ¿<br />     ...definición de campo... <br />     ...definición de campo... <br />     ... <br />? <br /><br />3. #(Modo,Modo,,,) ¿<br />     ...definición de campo...<br />     ...definición de campo...<br />     ...<br />?¿<br />     ...definición de campo...<br />     ...definición de campo... <br />     ...<br />? <br /><br />4. ¿ #Variable ? definición de campo<br /><br />5. #Variable ¿<br />     ...definición de campo... <br />     ...definici?n de campo... <br />     ... <br />?  <br /></span><br /><br /><span style="font-family: Courier New;">6. #Variable ¿<br />     ...definición de campo...<br />     ...definición de campo...<br />     ...<br />?¿<br />     ...definición de campo...<br />     ...definición de campo...<br />     ...<br />? <br /><br />7. ¿ #!Variable ? definición de campo <br /><br />8. #!Variable ¿<br />     ...definición de campo...<br />     ...definición de campo...<br />     ...<br />?<br /><br />9. #!Variable ¿<br />     ...definición de campo...<br />     ...definición de campo...<br />     ...<br />?¿<br />     ...definición de campo...<br />     ...definición de campo...<br />     ...<br />? <br /><br />10. ¿ condición ? definición de campo<br /><br />11. ¿ condición ?¿<br />     ...definición de campo...<br />     ...definición de campo...<br />     ...<br />?<br /><br />12. ¿ condición ?¿<br />     ...definición de campo...<br />     ...definición de campo...<br />     ...<br />?¿<br />     ...definición de campo...<br />     ...definición de campo...<br />     ...<br />?<br /><br />Las condiciones del tipo #() y #!() a parte de poner el modo (pudiendo se los comodines "*", "?", "?R", "?l") se puede condicionar por el perfil básico del usuario, el número de usuario, de nodo, del árbol, la constante "iSubList" (o la contracción "isl") para ejecutarlo cuando el listado sea una iSubList, en caso de ser el servidor de desarrollo </span>($_Development)<span style="font-family: Courier New;"> o si es WebMaster, para elo se precede la inicial del concepto del perfil y su valor si lo tiene por ejemplo:<br />#(c,u20,u23,n15,w,t2,d,D).- Se permite en <strong>c</strong>onsultas a todo el mundo y en el resto de modos al <strong>u</strong>suario 20 o al <strong>u</strong>suario 23 o al <strong>n</strong>odo 15 o si es <strong>w</strong>ebMaster o si es el arbol (<strong>t</strong>ree) 2 o si es el servidor de <strong>d</strong>esarrollo o si eres <strong>D</strong>esarrollador, lo normal es no mezclar los modos con el perfil del usuario.<br /><br />Cualquier condici?n puede ponerse delante de una etiqueta.<br /><br />El formato #() puede contener una expresión ej: #( $NmCampo=='...' ).<br /><br /><strong><u>LINEA DE ESTADO DEL DESKTOP</u></strong><br />En la linea de status del desktop se muestra la trayectoria de la ?ltima opci?n pulsada en esta linea se mostrar? el icono del men? principal, que si se quiere que sea otro distinto se definir? en el fichero de configuraci?n "desktop.ini" en la variable $_AddNameIconsStatus = "_status" que ser? el sufijo de los icono del men? principal, en los submenus el icono para indicar que la opci?n tiene un submen? utiliza el icono "g/menu.gif" utilizandolo en la linea de estado tambi?n, en el caso que exista el icono "g/menu_status.gif" utilizar? este en su lugar.<br />Desde esta linea de estado tambi?n se accede a repetir la ?ltima opci?n y a ejecutar el ?ltimo submen? ejecutado.<br /><br /><strong><u>DESCARGAR ARCHIVOS EN WINDOWS XP</u></strong><br />Cuando se descarge archivos no con "edes.php?D:", que es su forma normal, si no ejecutando un php con "edes.php?E:" se deber? poner al final de la url la variable "DOWNLOAD=1" para no dejar el iframe bloqueado, como en el siguiente ejemplo:<br />top.eCallSrv( window, 'edes.php?E:doc_zip.php&cd_contra='+eGF('cd_contra')+'&DOWNLOAD=1'  );<br /><br /><strong><u>CAMPOS TIPO FILE<br /></u></strong>Al enviar ficheros al servidor el nombre del fichero temporal se obtiene con "$_FILES[ ..NmField... ]['tmp_name']" o con "$[NmField]_tmp_name".<br /><br /><u><strong>PAGINAS PERSONALES</strong><br /></u>Si al ejecutar una p?gina fuera del motor queremos poder editarla y con el doble click recargar la p?gina hay que cargar el script "edes.js" como primer script de la siguiente forma: , este c?digo est? disponible como macro desde gsEdit.<br />Si el script es un php debemos terminar su ejecuci?n con "eEnd()" en lugar de "exit" o "die()", esta funci?n a parte de cerrar las transacciones y comprimir la p?gina si le pasamos el par?metro "true" grabar? la salida "html" para poderla consultar en caso de error.<br />Tambi?n deberiamos empezar la pagina con la funci?n "eCheckUser()" para la gesti?n del control de usuarios.<br /><br /><strong><u>IFRAME</u></strong><br />Si se crea alg?n "iframe" se tiene que definir la variable "eNORESIZE=true" dentro de la definici?n.<br /></span><br /><br /><u><strong>NULL<br /></strong></u>Si al grabar se envía la cadena "NULL" en mayúsculas grabará el valor nulo.<br /><br /><strong><u>CONDICIONES DE BUSQUEDA<br /></u></strong>- Si esta el caracter "*" har? un "like"<br />- Si solo esta el caracter "=" buscar? cadena vacia<br />- Si solo contiene el caracter "<" o la palabra "NULL" en mayusculas buscar? nulos.<br />- Si empieza por "(" y termina por ")" la busqueda ser? con "in (...)"<br />- Si empieza por ")" y termina por "(" la busqueda ser? con "not in (...)"<br />- Si empieza por "[" y termina por "]" la busqueda ser? con " matches"<br /><br /><strong><u>CONFIGURAR SCRIPT (DF) DEL SISTEMA<br /></u></strong>Cuando se ejecuta un script del sistema, que son los que empiezan por "$" se mira si existe el mismo nombre de script con extensi?n "ini" en el directorio "/_datos/config" en cuyo caso se ejecutar? despues de parsear el fuente.<br /><u><br /><strong>PROCESO POR LOTES</strong></u><br />Una vez al d?a, la primera vez que se entre en la aplicaci?n realizar? las siguientes tareas:<br />- Se borran los ficheros que est?n en '../_tmp/cch' con una antig?edad de un d?a.<br />- Se borran los ficheros que est?n en '../_tmp/log' con una antig?edad de un d?a.<br />- Se borran los ficheros que est?n en '../_tmp/pdf' con una antig?edad de un d?a.<br />- Se borran los ficheros que est?n en '../_tmp/php' con una antig?edad de un d?a.<br />- Se borran los ficheros que est?n en '../_tmp/exp' con una semana de antig?edad.<br />- Se borran los ficheros que est?n en '../_tmp/zip' con una semana de antig?edad.<br />- Se renombra el fichero '/_tmp/err/_log.err" cada trimestre.<br /><br /><strong><u>FUNCIONALIDADES</u></strong><br />- Los campos tipo file tienen muchas nuevas funcionalidades:<br />- Se puede deseleccionar.<br />- En las subventanas si el icono de cerrar parpadea indica que la ventana se puede cerrar pulsando escape.<br /><br /><strong><u>AL SALIR DE LA APLICACION</u></strong><br />si existe la funci?n de javascript "user_eClose()" ser? llamada y el usuario cuando termine su proceso tendr? que llamar a la funci?n "top._eClose()" para cerrar la aplicaci?n.<br /><br /><strong><u>SERVIDOR DE RESPALDO</u></strong><br />Tiene la posibilidad de si el servidor apache se ha caido y hay otro de respaldo en tiempo real utilizarle para entrar en la intranet.<br /><br /><strong><u>BALANCEADOR</u></strong><br />Para balancear servidores lo único que hay que hacer es poner en el fichero "/_datos/config/balancer.ini" con la lista de url a ejecutar, el fichero podría contener por ejemplo:<br /><a href="../../aplicacion_1/http/">http://localhost/aplicacion_1/http/</a><br /><a href="../../aplicacion_2/http/">http://localhost/aplicacion_2/http/</a><br /><a href="../../aplicacion...../http/">http://localhost/aplicacion...../http/</a><br />y balancearía con la lista de servidores.<br /><br /><strong><u>SEGURIDAD</u></strong><br />- Todo est? por encima de http<br />- Para instalar se puede pedir login y password<br />- Para instalar se puede filtrar por determinadas ips<br />- El password viaja encriptado<br />- Al teclear el password se puede activar un caracter desencadenante<br />- Se puede bloquear el acceso por ip, ips, rango de ips por usuario<br />- Se puede permitir el acceso a determinadas macaddress del cliente<br />- Acceso solo permitido en determinadas franjas horarias por dia.<br />- Firmar un documento de seguridad por la ley de protecci?n de datos<br />- Registrar todas las descargas que se hagan<br />- A prueba de injecciones SQL al logearse<br />- No hay ninguna url visible<br />- Configurable el mapa de opciones por usuario<br />- Configurable qui?n puede Extraer XLS, PDF e imprimir<br />- D?as para obligar a cambiar la clave<br />- D?as sin entrar para que caduque el acceso<br />- etc<br />- Registrar todas las modificaciones que se hagan<br /><br /><strong><u>MODIFICAR EL COMPORTAMIENTO DE SCRIPT EDF DEL MOTOR</u></strong><br />Si en "/_datos/config" existe el mismo nombre de script con la extensi?n ".ini" se cargar? despues de parsear el script.<br /><br /><br /><br /></td>
</tr>
<tr>
<td><strong> </strong></td>
</tr>
</tbody>
</table>
 <br /><br /><br /><br /><br /><br /><br /><br /><!-- [HelpEnd] -->
<SCRIPT LANGUAGE="JavaScript">
Esquema.cellSpacing = 0;
if( document.getElementById("Ejemplo")!=null ){
	if( Ejemplo.length==undefined && Ejemplo.innerHTML.length==0 ){
		tEjemplo.parentElement.style.display = 'none';
	}else{
		for(var i=0; i<Ejemplo.length; i++){
			if( Ejemplo[i].innerHTML.length==0 ) Ejemplo[i].parentElement.style.display = 'none';
		}
	}
}
if( document.getElementById("Parametro")!=null && Parametro.innerHTML.length==0 ) tParametro.parentElement.style.display = 'none';
if( window.frameElement.getAttribute("eSubWin")==1 ) Etiqueta.style.display = "none";
window.focus();
</SCRIPT>
</BODY></HTML>